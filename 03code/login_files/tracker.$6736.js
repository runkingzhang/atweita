KISSY.add("lib/tracker",function(S,Cookie){var DTID=Cookie.get("dtid");return DTID&&(window._DD_TRACE=window._DD_TRACE||{},window._DD_TRACE.dtid=DTID),function(){function getSearchEngineParams(){var a=Collection.referrer,b=[];if(a)for(var c=0;c<SERules.length;c++){var d=SERules[c],e=RegExp(d[1]).test(a);if(e){var f=trim(getWords(a,d[2]));return b.push("set="+d[0]),b.push("sew="+f),b.push("see="+d[3]),b}}}function getWords(a,b){var c=a.match(RegExp("(^|&|\\?|#)("+b+")=([^&#]*)(&|$|#)",""));return c?c[3]:null}function getTimestamp(){return(new Date).getTime()}function trim(a){if(!a||a=="")return"";while(a.charAt(0)==" "||a.charAt(0)=="\n"||a.charAt(0,1)=="\r")a=a.substring(1,a.length);while(a.charAt(a.length-1)==" "||a.charAt(a.length-1)=="\n"||a.charAt(a.length-1)=="\r")a=a.substring(0,a.length-1);return a}function merge(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function getFlashVersion(){var f="-",n=navigator;if(n.plugins&&n.plugins.length){for(var ii=0;ii<n.plugins.length;ii++)if(n.plugins[ii].name.indexOf("Shockwave Flash")!=-1){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(var ii=10;ii>=2;ii--)try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}return f}function getDefaultParams(a){var b=[];a.dtid&&b.push("dtid="+encodeURIComponent(a.dtid)),a.feedid&&b.push("feedid="+encodeURIComponent(a.feedid)),b.push("ts="+getTimestamp()),b.push("ce="+(Collection.cookieEnabled?1:0)),b.push("je="+(Collection.javaEnabled?1:0)),b.push("lang="+encodeURIComponent(Collection.language)),b.push("scr="+encodeURIComponent(Collection.screenSize)),b.push("cd="+encodeURIComponent(Collection.colorDepth)),b.push("fl="+encodeURIComponent(getFlashVersion())),b.push("hn="+encodeURIComponent(Collection.hostname)),b.push("pn="+encodeURIComponent(Collection.pathname)),b.push("qs="+encodeURIComponent(Collection.querystring));if(Collection.referrer){var c=Collection.referrer;c.length>1024&&(c=c.substr(0,1024)),b.push("ref="+encodeURIComponent(c))}return b}function createTrackerPic(a){var b=new Image(1,1);b.src=a,b.onload=function(){voidFunc()}}function voidFunc(){return}function getCustomParams(a){var b=[],c=0,d,e,f;if(a){d=a.length;for(;c<d;c++)e=a[c],e.name&&e.value&&(f=encodeURIComponent("c["+e.name+"]")+"="+encodeURIComponent(e.value),b.push(f))}return b}var WIN=window,DOC=document,NAV=WIN.navigator,LOC=WIN.location,MILLISECONDS_OF_DAY=864e5;if(WIN._DD_TRACE&&WIN._DD_TRACE.LOADED)return;var Cookie={get:function(a){var b,c;return!!a&&(c=String(DOC.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(b=c[1]?decodeURIComponent(c[1]):""),b},set:function(a,b,c,d,e,f){var g=String(encodeURIComponent(b)),h=c;typeof h=="number"&&(h=new Date,h.setTime(h.getTime()+c*MILLISECONDS_OF_DAY)),h instanceof Date&&(g+="; expires="+h.toUTCString()),!d||(g+="; domain="+d),!e||(g+="; path="+e),f&&(g+="; secure"),DOC.cookie=a+"="+g},remove:function(a,b,c,d){this.set(a,"",-1,b,c,d)}},DefaultOptions={logPicPath:"http://dt.libdd.com/t.gif"},Collection={cookieEnabled:NAV.cookieEnabled,javaEnabled:NAV.javaEnabled(),language:NAV.language||NAV.browserLanguage||NAV.systemLanguage||NAV.userLanguage||"",screenSize:WIN.screen.width+"x"+WIN.screen.height,colorDepth:WIN.screen.colorDepth,referrer:DOC.referrer||"",hostname:LOC.hostname,pathname:LOC.pathname,querystring:LOC.search.replace(/^\?/,"")},SERules=[[1,"baidu.com","wd",2],[2,"google.com","q",1],[3,"soso.com","w",2],[4,"youdao.com","q",1],[5,"sogou.com","query",2],[6,"gougou.com","search",2],[7,"bing.com","q",1],[8,"zhongsou.com","w",2],[9,"search.yahoo.com","p",1],[10,"yahoo.cn","q",1],[11,"search.114so.cn","kw",2],[12,"jike.com","q",1]];WIN._DD_TRACE=WIN._DD_TRACE||{},WIN._DD_TRACE.LOADED=!0,WIN._DD_TRACE.Cookie=Cookie,_DD_TRACE.Tracker=function(a,b){var c=merge(DefaultOptions,_DD_TRACE),d=getDefaultParams(c);a=a||"pv",d.unshift("t="+encodeURIComponent(a));if(a=="pv"){var e=getSearchEngineParams();e&&(d=d.concat(e))}else if(b){var f=getCustomParams(b);f&&(d=f.concat(d))}var g=c.logPicPath+"?"+d.join("&");createTrackerPic(g)}}(),window._DD_TRACE},{requires:["cookie"]});